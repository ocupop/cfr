<collection-filters>
  <nav class="collectionNav">
    <h2>Product Categories</h2>
    <ul class="nav flex-column">
      <li class="text-uppercase" data-filter="all">
        <button data-filter="all">All</button>
      </li>
      {% assign categories = "" | split:"," %}
      {% for object in page.products %}
      {% assign product = site.products | where: 'slug', object | first %}
      {% for category in product.categories %}
      {% assign categories = categories | push: category %}
      {% endfor %}
      {% endfor %}
      {% assign categories = categories | uniq %}
      {% for item in categories %}
      <li class="text-uppercase">
        <button data-filter=".{{ item | slugify }}">{{ item }}</button>
      </li>
      {% endfor %}
    </ul>

    <h3>Brands</h3>
    <ul class="nav flex-column">
      <li>
        <button data-filter="all">All Brands</button>
      </li>
      {% for brand in site.brands %}
      <li class="text-uppercase">
        <button data-filter=".{{ brand | slugify }}">{{ brand }}</button>
      </li>
      {% endfor %}
    </ul>
  </nav>
</collection-filters>